<html>
  <head>
    <meta charset="utf-8">
    <title>Prosthesis - Upload</title>
    <style media="screen">
      body {
        display: flex;
        min-height: 100vh;
        width: 100%;
        padding: 0;
        margin: 0;
        align-items: center;
        justify-content: center;
        flex-direction: column;
      }
      
      #uploader {
        -webkit-appearance: once;
        appearance: none;
        width: 50%;
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
  
  <progress vlaue="0" max="100" id="uploader">0%</progress>
  <input type="file" value="upload" id="fileButton" />
  
  <script src="https://www.gstatic.com/firebasejs/live/3.0/firebase.js"></script>
  <script>
    var config = {
      apiKey: "AIzaSyBmQVIwwGgud9N7OXx-IE7jLWwd02XGD6s",
      authDomain: "prosthesis-30783.firebaseapp.com",
      databaseURL: "https://prosthesis-30783-default-rtdb.firebaseio.com",
      storageBucket: "prosthesis-30783.appspot.com"  
    };
    firebase.initializeApp(config);

    var uploader = document.getElementById("uploader");
    var fileButton = document.getElementById("fileButton");
    
    fileButton.addEventListener('change', function(e) {
      e.preventDefault();
      
      console.log("inside");
      
      var file = e.target.files[0];
      
      console.log(file.type);
      
      var metadata = {
        contentType: file.type
      };

      
      var storageRef = firebase.storage().ref('photos/' + file.name);
      var task = storageRef.put(file, metadata);
      
      task.on('state_changed',
        function progress(snap) {
          var p = (snap.bytesTransferred / snap.totalBytes) * 100;
          uploader.value = p;
        },
        function error(err) {
          console.log(err);
        },
        function complete() {
          
        }
      );
    });
  </script>
</body>
</html>
